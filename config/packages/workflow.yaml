framework:
    workflows:
        commande_lifecycle:
            type: state_machine
            marking_store:
                type: method
                property: statutValue
            supports:
                - App\Entity\Commande
            initial_marking: en_attente_validation
            places:
                - en_attente_validation
                - validee
                - en_preparation
                - prete
                - retiree
                - annulee
            transitions:
                valider:
                    from: en_attente_validation
                    to: validee
                demarrer_preparation:
                    from: validee
                    to: en_preparation
                annuler_preparation:
                    from: en_preparation
                    to: validee
                terminer_preparation:
                    from: en_preparation
                    to: prete
                revenir_en_preparation:
                    from: prete
                    to: en_preparation
                acter_retrait:
                    from: prete
                    to: retiree
                annuler_commande:
                    from:
                        - en_attente_validation
                        - validee
                        - en_preparation
                        - prete
                    to: annulee
