{% extends 'base.html.twig' %}

{% block title %}Dashboard logistique{% endblock %}

{% block body %}
<div class="container py-4">
    <h1 class="fw-bold fs-2 mb-4">Parking DMAX — Commandes prêtes du jour</h1>

    {% for message in app.flashes('success') %}
        <div class="alert alert-success fs-5" role="alert">{{ message }}</div>
    {% endfor %}

    {% if commandes is empty %}
        <div class="alert alert-info fs-5">Aucune commande prête sur les créneaux d'aujourd'hui.</div>
    {% else %}
        <div class="d-grid gap-3">
            {% for commande in commandes %}
                <article class="card shadow-sm border-0">
                    <div class="card-body p-3 p-md-4">
                        <p class="mb-2 fs-5"><strong>Commande #{{ commande.id }}</strong></p>
                        <p class="mb-2 fs-6">
                            <strong>Date:</strong> {{ commande.creneau ? commande.creneau.dateHeure|date('d/m/Y') : 'Sans créneau' }}
                        </p>
                        <p class="mb-3 fs-6">
                            <strong>Créneau:</strong>
                            {% if commande.creneau %}
                                {{ commande.creneau.heureDebut|date('H:i') }} - {{ commande.creneau.heureFin|date('H:i') }}
                            {% else %}
                                —
                            {% endif %}
                        </p>

                        <div class="d-grid gap-2">
                            <a class="btn btn-outline-dark btn-lg" href="{{ path('logistique_bon_livraison', {id: commande.id}) }}">
                                Voir le bon de livraison
                            </a>
                            <form method="post" action="{{ path('logistique_commande_retrait', {id: commande.id}) }}">
                                <button type="submit" class="btn btn-success btn-lg w-100 fw-semibold">Valider le retrait</button>
                            </form>
                        </div>
                    </div>
                </article>
            {% endfor %}
        </div>
    {% endif %}
</div>
{% endblock %}
