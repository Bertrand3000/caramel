{% extends 'base.html.twig' %}
{% block title %}Administration{% endblock %}
{% block body %}
<main class="container py-4">
    <section class="form-shell dmax-list-shell">
        <header class="form-head">
            <h1>Administration</h1>
            <p>Pilote l'ouverture de la boutique, les imports et les exports.</p>
        </header>

        <div class="form-grid-two">
            <section class="form-section">
                <h2>Paramètres boutique</h2>
                <p class="form-help mb-2">Active ou désactive l'ouverture par profil et ajuste le quota.</p>
                {{ form_start(form, {attr: {'class': 'produit-form'}}) }}
                    {{ form_errors(form) }}
                    <div class="form-check">
                        {{ form_widget(form.boutique_ouverte_agents, {'attr': {'class': 'form-check-input'}}) }}
                        {{ form_label(form.boutique_ouverte_agents, 'Boutique ouverte pour les agents', {'label_attr': {'class': 'form-check-label'}}) }}
                    </div>
                    {{ form_errors(form.boutique_ouverte_agents) }}

                    <div class="form-check">
                        {{ form_widget(form.boutique_ouverte_teletravailleurs, {'attr': {'class': 'form-check-input'}}) }}
                        {{ form_label(form.boutique_ouverte_teletravailleurs, 'Boutique ouverte pour les télétravailleurs', {'label_attr': {'class': 'form-check-label'}}) }}
                    </div>
                    {{ form_errors(form.boutique_ouverte_teletravailleurs) }}

                    <div class="form-check">
                        {{ form_widget(form.boutique_ouverte_partenaires, {'attr': {'class': 'form-check-input'}}) }}
                        {{ form_label(form.boutique_ouverte_partenaires, 'Boutique ouverte pour les partenaires', {'label_attr': {'class': 'form-check-label'}}) }}
                    </div>
                    {{ form_errors(form.boutique_ouverte_partenaires) }}

                    {{ form_row(form.max_produits_par_commande, {
                        label: 'Quota maximum d\'articles par commande',
                        attr: {'class': 'form-control', 'min': 1}
                    }) }}

                    <div class="form-actions">
                        <button class="btn btn-primary" type="submit">Sauvegarder</button>
                    </div>
                {{ form_end(form) }}
            </section>

            <section class="form-section">
                <h2>Import télétravailleurs</h2>
                <p class="form-help mb-2">Remplace la liste actuelle des numéros d'agents télétravailleurs depuis un CSV.</p>
                {{ form_start(importForm, {action: path('admin_import_teletravailleurs'), attr: {'class': 'produit-form'}}) }}
                    {{ form_errors(importForm) }}
                    {{ form_row(importForm.csvFile, {
                        label: 'Fichier CSV',
                        attr: {'class': 'form-control'}
                    }) }}
                    <div class="form-actions">
                        <button class="btn btn-primary" type="submit">Importer le CSV</button>
                    </div>
                {{ form_end(importForm) }}
            </section>
        </div>

        <section class="form-section">
            <h2>Exports CDC §13</h2>
            <p class="form-help mb-2">Télécharge les exports ventes, stock restant et comptabilité.</p>
            <div class="form-grid-three">
                <a class="btn btn-outline-primary w-100" href="{{ path('admin_export_ventes', {format: 'csv'}) }}">Ventes (CSV)</a>
                <a class="btn btn-outline-primary w-100" href="{{ path('admin_export_ventes', {format: 'xls'}) }}">Ventes (Excel)</a>
                <a class="btn btn-outline-primary w-100" href="{{ path('admin_export_stock_restant', {format: 'csv'}) }}">Stock restant (CSV)</a>
                <a class="btn btn-outline-primary w-100" href="{{ path('admin_export_stock_restant', {format: 'xls'}) }}">Stock restant (Excel)</a>
                <a class="btn btn-outline-primary w-100" href="{{ path('admin_export_comptabilite', {format: 'csv'}) }}">Comptabilité (CSV)</a>
                <a class="btn btn-outline-primary w-100" href="{{ path('admin_export_comptabilite', {format: 'xls'}) }}">Comptabilité (Excel)</a>
            </div>
        </section>
    </section>
</main>
{% endblock %}
