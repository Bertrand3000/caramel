{% extends 'base.html.twig' %}
{% block title %}Éditer produit{% endblock %}
{% block body %}
    <main class="container py-4">
        <section class="form-shell">
            <header class="form-head">
                <h1>Éditer {{ produit.libelle }}</h1>
            </header>

            {{ form_start(form, {'attr': {'class': 'produit-form'}}) }}
                <section class="form-section">
                    <h2>Identification</h2>
                    <div class="form-grid-two">
                        {{ form_row(form.libelle, {
                            'label': 'Libellé du produit',
                            'attr': {
                                'class': 'form-control',
                                'placeholder': 'Ex: Bureau droit 160 cm'
                            }
                        }) }}
                        {{ form_row(form.etat, {
                            'label': 'État',
                            'attr': {'class': 'form-select'}
                        }) }}
                        {{ form_row(form.etage, {
                            'label': 'Étage',
                            'attr': {'class': 'form-control'}
                        }) }}
                        {{ form_row(form.porte, {
                            'label': 'Porte / Bureau',
                            'attr': {'class': 'form-control'}
                        }) }}
                        {{ form_row(form.numeroInventaire, {
                            'label': 'Numéro d’inventaire (optionnel)',
                            'attr': {
                                'class': 'form-control',
                                'placeholder': 'Exemple : 85.2000.100.2000'
                            }
                        }) }}
                        <div class="form-end-checkbox">
                            <div class="form-check">
                                {{ form_widget(form.tagTeletravailleur, {'attr': {'class': 'form-check-input'}}) }}
                                {{ form_label(form.tagTeletravailleur, 'Produit télétravailleur', {'label_attr': {'class': 'form-check-label'}}) }}
                            </div>
                            {{ form_errors(form.tagTeletravailleur) }}
                        </div>
                    </div>
                </section>

                <section class="form-section">
                    <h2>Description</h2>
                    {{ form_row(form.description, {
                        'label': 'Description (optionnelle)',
                        'attr': {'class': 'form-control'}
                    }) }}
                </section>

                <section class="form-section">
                    <h2>Dimensions (cm)</h2>
                    <div class="form-grid-three">
                        {{ form_row(form.largeur, {
                            'label': 'Largeur',
                            'attr': {'class': 'form-control', 'min': '0', 'step': '0.1'}
                        }) }}
                        {{ form_row(form.hauteur, {
                            'label': 'Hauteur',
                            'attr': {'class': 'form-control', 'min': '0', 'step': '0.1'}
                        }) }}
                        {{ form_row(form.profondeur, {
                            'label': 'Profondeur',
                            'attr': {'class': 'form-control', 'min': '0', 'step': '0.1'}
                        }) }}
                    </div>
                </section>

                <section class="form-section">
                    <h2>Photos</h2>
                    <div class="photo-preview-grid">
                        <div class="photo-preview-card">
                            <p class="photo-preview-title">Produit actuel</p>
                            <img class="photo-preview-img" src="{{ asset(produit.photoProduitPublicPath) }}" alt="Photo produit actuelle">
                        </div>
                        <div class="photo-preview-card">
                            <p class="photo-preview-title">Numéro d’inventaire actuel</p>
                            {% if produit.photoNumeroInventairePublicPath %}
                                <img class="photo-preview-img" src="{{ asset(produit.photoNumeroInventairePublicPath) }}" alt="Photo numéro inventaire actuelle">
                            {% else %}
                                <div class="photo-preview-empty">Aucune image</div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="form-grid-two">
                        {{ form_row(form.photoProduit, {
                            'label': 'Remplacer photo produit',
                            'attr': {'class': 'form-control'}
                        }) }}
                        {{ form_row(form.photoNumeroInventaire, {
                            'label': 'Remplacer photo numéro inventaire',
                            'attr': {'class': 'form-control'}
                        }) }}
                    </div>
                    <p class="form-help">Si tu n’envoies pas de nouvelle photo, l’image actuelle est conservée.</p>
                </section>

                <div class="form-actions">
                    <a class="btn btn-outline-secondary" href="{{ path('dmax_dashboard') }}">Annuler</a>
                    <button class="btn btn-primary" type="submit">Mettre à jour</button>
                </div>
            {{ form_end(form) }}
        </section>
    </main>
{% endblock %}
